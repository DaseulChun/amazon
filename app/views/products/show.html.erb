<h3>Show Page</h3>

<h1><%= @product.title%></h1>
<p><%= @product.description %></p>
<p><%= number_to_currency(@product.price) %></p>

<%= link_to "Edit", edit_product_path(@product) %>
<%= link_to "Delete", product_path(@product), method: :delete, data: {confirm: "Are you sure?"} %>

<h3>Leave a review!</h3>

<%= form_with(model: [@product, @review], local: true) do |f| %>
  <% if @review.errors.any? %>
    <ul>
      <% @review.errors.full_messages.each do |msg|%>
        <li><%= msg %></li>
      <%end%>
    </ul>
  <%end%>

  <div>
    <%= f.text_area(
      :body,
      cols: 50,
      rows: 5,
      placeholder: "Please put honest reviews",
    )%>
    <br>
    <%= f.text_area(
      :rating,
      cols: 10,
      rows: 1,
      placeholder: "Number!"
    )%>
  </div>
  <%= f.submit "Save my Review!" %>
<% end %>

<hr />

<div>
<% if @reviews!= nil %>
<% @reviews.each do |review| %>
  <div>
    <p><%= review.body %></p>
    <p><%= review.rating %> Star</p>
    <small>
      Commented <%= time_ago_in_words(review.created_at) %> ago
    </small>
    ‚óè
    <small>
      <%= link_to(
        "Delete", 
        product_review_path(@product, review), 
        method: :delete,
        data: {
          confirm: "Are you sure?"
        })
      %>
    </small>
  </div>
<% end %>
<% end %>
</div>


